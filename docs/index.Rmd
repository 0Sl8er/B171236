---
title: "Does the prescription of UTI antibiotics increase during warmer months in Scotland?"
author: "Orianne Slater"
date: "2024-11-01"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
## Introduction

Dehydration is caused by the lack of water in the body. This can happen when the body sweats a lot, along with an insufficient water intake. Urinary tract infections (UTIs) can result from dehydration and are treated using antibiotics such as nitrofurantoin. Using prescription data from pharmacies in Scotland, the link between warmer months and level of prescription of nitrofurantoin will be explored.

## Loading Libraries

```{r, load-libraries, message=FALSE}
library(tidyverse)
library(janitor)
library(here)
library(gt)
library(kableExtra)
```


## Loading Data

```{r, load-data, message=FALSE, warning=FALSE}
#importing data files downloaded from https://www.opendata.nhs.scot/dataset/prescriptions-in-the-community
#cleaning names for consistency
jan2023_raw <- read_csv(here("data", "pitc202301.csv")) %>% 
  clean_names()

feb2023_raw <- read_csv(here("data", "pitc202302.csv")) %>% 
  clean_names()

march2023_raw <- read_csv(here("data", "pitc202303.csv")) %>% 
  clean_names()

april2023_raw <- read_csv(here("data", "pitc202304.csv")) %>% 
  clean_names()

may2023_raw <- read_csv(here("data", "pitc202305.csv")) %>% 
  clean_names()

june2023_raw <- read_csv(here("data", "pitc202306.csv")) %>% 
  clean_names()

july2023_raw <- read_csv(here("data", "pitc202307.csv")) %>% 
  clean_names()

august2023_raw <- read_csv(here("data", "pitc202308.csv")) %>% 
  clean_names()

sept2023_raw <- read_csv(here("data", "pitc202309.csv")) %>% 
  clean_names()

oct2023_raw <- read_csv(here("data", "pitc202310.csv")) %>% 
  clean_names()

nov2023_raw <- read_csv(here("data", "pitc202311.csv")) %>% 
  clean_names()

dec2023_raw <- read_csv(here("data", "pitc202312.csv")) %>% 
  clean_names()

```

## Joining Dataframes

```{r}

```

## Filtering for Antibiotic (Nitrofurantoin) Data

```{r}
jan2023_nitrofurantoin <- jan2023_raw %>% 
  filter(str_detect(bnf_item_description, "NITROFURANTOIN"))
```


```{r include = FALSE}
#reasoning for choosing 2023 and nitrofurantoin-

#say where data is found - links specific to each dataset found at https://www.opendata.nhs.scot/dataset/prescriptions-in-the-community

#show head of dataframe?

#use list then lapply?? to filter over multiple dataframes

#or to merge do.call("rbind", list(df1, df2, df3))

#or newname<- merge(df1, df2)%>% merge(df3)

#filter for nitrofurantoin

#group by healthboard and month, sum of paid quantity

#join with healthboards to know names

#lubridate for month + year

#plot x = month, y = e.g. paid quantity, coloured by healthboard
```
## Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
